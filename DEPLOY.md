# Деплой на сервер

После обновления кода с GitHub выполните на сервере две команды.

## 1. Подтянуть изменения

```bash
cd ~/FinAdvisor_AI_bot
git pull origin main
```

## 2. Запустить деплой

```bash
bash scripts/deploy.sh
```

Скрипт автоматически:

- обновит Python-зависимости (venv) и выполнит миграции БД;
- установит зависимости фронтенда и соберёт сборку (`frontend/dist`);
- обновит unit systemd и перезапустит `finadvisor-api`;
- обновит конфиг Nginx (если есть `config/nginx-finadvisor.conf`) и перезагрузит nginx.

После этого откройте сайт в браузере (например, https://finadvisor-ai.ru) — будет отображаться **новый React-интерфейс**.

---

## Только переключить сайт на новый React-интерфейс

Если деплой уже делали, а в браузере всё ещё старый интерфейс (webapp), выполните:

```bash
cd ~/FinAdvisor_AI_bot
bash scripts/use-react-frontend.sh
```

Скрипт соберёт React-приложение и переключит Nginx на раздачу статики из `frontend/dist` (новый интерфейс). Перезапуск API не выполняется.

## Требования на сервере

- В корне проекта должен быть файл **`.env`** (скопируйте из `.env.example` и заполните).
- Установлены: **Python 3**, **Node.js** (для `npm`), **PostgreSQL**, **nginx**.
- Сервис `finadvisor-api` уже один раз настроен (скрипт обновит unit при каждом деплое).

## Если проект лежит не в /root/FinAdvisor_AI_bot

Скрипт подставляет текущий путь проекта в конфиги systemd и nginx — можно клонировать репозиторий в любую папку и запускать `bash scripts/deploy.sh` из корня репозитория.
