# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Telegram Payments

## –ß—Ç–æ –±—ã–ª–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

‚úÖ –ü–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ–ø–ª–∞—Ç—ã –ø–æ–¥–ø–∏—Å–∫–∏ —á–µ—Ä–µ–∑ Telegram Payments:
- –ö–æ–º–∞–Ω–¥–∞ `/subscribe` —Å –≤—ã–±–æ—Ä–æ–º —Ç–∞—Ä–∏—Ñ–∞
- –ö–Ω–æ–ø–∫–∞ "üí≥ –û—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É" –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é (–µ—Å–ª–∏ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –ø–æ–¥–ø–∏—Å–∫–∏)
- –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω–≤–æ–π—Å–æ–≤ –¥–ª—è –æ–ø–ª–∞—Ç—ã
- –û–±—Ä–∞–±–æ—Ç–∫–∞ pre-checkout –∑–∞–ø—Ä–æ—Å–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `premium_until` –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã
- –ü—Ä–æ–¥–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏ (–µ—Å–ª–∏ —É–∂–µ –∞–∫—Ç–∏–≤–Ω–∞) –∏–ª–∏ –Ω–∞—á–∞–ª–æ –Ω–æ–≤–æ–π

## –¢–∞—Ä–∏—Ñ—ã

- **–ú–µ—Å—è—Ü**: 299 ‚ÇΩ (30 –¥–Ω–µ–π)
- **–ì–æ–¥**: 2990 ‚ÇΩ (365 –¥–Ω–µ–π, —ç–∫–æ–Ω–æ–º–∏—è 20%)

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### 1. –ü–æ–ª—É—á–∏—Ç—å Provider Token

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/mybots`
3. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞
4. –í—ã–±–µ—Ä–∏—Ç–µ "Payments"
5. –í—ã–±–µ—Ä–∏—Ç–µ "Configure Payments" –∏–ª–∏ "Edit Payment Provider"
6. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Stripe, YooMoney, –∏ —Ç.–¥.)
7. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
8. –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ BotFather –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç –≤–∞–º **Provider Token**

### 2. –î–æ–±–∞–≤–∏—Ç—å Provider Token –≤ .env

–î–æ–±–∞–≤—å—Ç–µ –≤ —Ñ–∞–π–ª `.env`:

```env
PAYMENT_PROVIDER_TOKEN=your_provider_token_here
```

### 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:

```bash
sudo systemctl restart finadvisorbot.service
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π

1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç `/start` –∏–ª–∏ `/subscribe`
2. –ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞, –≤–∏–¥–∏—Ç –∫–Ω–æ–ø–∫—É "üí≥ –û—Ñ–æ—Ä–º–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É"
3. –ù–∞–∂–∏–º–∞–µ—Ç –Ω–∞ –∫–Ω–æ–ø–∫—É ‚Üí –≤—ã–±–∏—Ä–∞–µ—Ç —Ç–∞—Ä–∏—Ñ (–º–µ—Å—è—Ü/–≥–æ–¥)
4. Telegram –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–æ—Ä–º—É –æ–ø–ª–∞—Ç—ã
5. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ–ø–ª–∞—á–∏–≤–∞–µ—Ç
6. –ë–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–π –æ–ø–ª–∞—Ç–µ
7. `premium_until` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
8. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

### –õ–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–ª–µ–Ω–∏—è

- –ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞ **–∞–∫—Ç–∏–≤–Ω–∞** ‚Üí –ø—Ä–æ–¥–ª–µ–≤–∞–µ—Ç—Å—è –æ—Ç —Ç–µ–∫—É—â–µ–π –¥–∞—Ç—ã –æ–∫–æ–Ω—á–∞–Ω–∏—è
- –ï—Å–ª–∏ –ø–æ–¥–ø–∏—Å–∫–∞ **–∏—Å—Ç–µ–∫–ª–∞** ‚Üí –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã

–ü—Ä–∏–º–µ—Ä:
- –ü–æ–¥–ø–∏—Å–∫–∞ –¥–æ 01.02.2026, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–∫—É–ø–∞–µ—Ç –º–µ—Å—è—Ü 15.01.2026
- –ù–æ–≤–∞—è –¥–∞—Ç–∞: 01.02.2026 + 30 –¥–Ω–µ–π = 03.03.2026

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π Provider Token –æ—Ç BotFather:
- BotFather –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ—Å—Ç–æ–≤—ã–π —Ç–æ–∫–µ–Ω –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –¢–µ—Å—Ç–æ–≤—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –Ω–µ —Å–ø–∏—Å—ã–≤–∞—é—Ç —Ä–µ–∞–ª—å–Ω—ã–µ –¥–µ–Ω—å–≥–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/subscribe` –±–æ—Ç—É
2. –í—ã–±–µ—Ä–∏—Ç–µ —Ç–∞—Ä–∏—Ñ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –∏–Ω–≤–æ–π—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±—Ä–∞–±–æ—Ç–∫—É pre-checkout (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å `ok=True`)
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ `premium_until` –ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- –ï—Å–ª–∏ `PAYMENT_PROVIDER_TOKEN` –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ "–ü–ª–∞—Ç–µ–∂–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã"
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∏–Ω–≤–æ–π—Å–∞ ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è alert —Å –æ—à–∏–±–∫–æ–π
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –≤ pre-checkout ‚Üí –ø–ª–∞—Ç–µ–∂ –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ–± –æ—à–∏–±–∫–µ
- –ï—Å–ª–∏ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏ ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- Provider Token —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ `.env` (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è –≤ git)
- Payload –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –ø–ª–∞—Ç–µ–∂–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –ø–æ–¥–ø–∏—Å–∫–∏
- –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

- `/start` - –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é —Å –∫–Ω–æ–ø–∫–æ–π –æ–ø–ª–∞—Ç—ã (–µ—Å–ª–∏ –Ω–µ—Ç –ø–æ–¥–ø–∏—Å–∫–∏)
- `/subscribe` - –≤—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞ –∏ –æ–ø–ª–∞—Ç–∞
- `/status` - —Å—Ç–∞—Ç—É—Å –ø–æ–¥–ø–∏—Å–∫–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

```python
# –¢–∞—Ä–∏—Ñ—ã
SUBSCRIPTION_PLANS = {
    "month": {...},
    "year": {...}
}

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
@dp.message(Command("subscribe"))  # –í—ã–±–æ—Ä —Ç–∞—Ä–∏—Ñ–∞
@dp.callback_query(F.data.startswith("pay_"))  # –û—Ç–ø—Ä–∞–≤–∫–∞ –∏–Ω–≤–æ–π—Å–∞
@dp.pre_checkout_query()  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –æ–ø–ª–∞—Ç–æ–π
@dp.message(F.content_type == "successful_payment")  # –£—Å–ø–µ—à–Ω–∞—è –æ–ø–ª–∞—Ç–∞
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –æ–ø–ª–∞—Ç—ã
2. ‚è≥ –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Provider Token –≤ BotFather
3. ‚è≥ –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–∫–µ–Ω –≤ .env
4. ‚è≥ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–ø–ª–∞—Ç—É
5. ‚è≥ –û–±–Ω–æ–≤–∏—Ç—å Mini App –¥–ª—è –ø–æ–∫–∞–∑–∞ paywall –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–¥–ø–∏—Å–∫–∏
