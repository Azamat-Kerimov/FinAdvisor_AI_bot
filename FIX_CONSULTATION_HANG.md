# –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∑–∞–≤–∏—Å–∞–Ω–∏—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –≤ Web App

## –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–õ–∏—á–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è" –≤ Web App –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Ö–æ–¥–∏—Ç –≤ –≤–µ—á–Ω—É—é –∑–∞–≥—Ä—É–∑–∫—É, –∞ —Å–µ—Ä–≤–µ—Ä "–≤–∏—Å–∏—Ç".

## –ü—Ä–∏—á–∏–Ω–∞
–ü—Ä–∏ lazy import `bot.py` —Å–æ–∑–¥–∞—é—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã `Bot` –∏ `Dispatcher`, —á—Ç–æ –º–æ–∂–µ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ. –¢–∞–∫–∂–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏ –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.

## –†–µ—à–µ–Ω–∏–µ

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

```bash
cd /root/FinAdvisor_AI_bot
git pull origin main
sudo systemctl restart finadvisor-api.service
```

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏

```bash
sudo journalctl -u finadvisor-api.service -f
```

–ü—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ `/api/consultation` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏:
- "Consultation request received for user_id=..."
- "Loading bot.py module (first time)..." (—Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ)
- "Executing bot.py module..."
- "bot.py module loaded successfully"
- "Generating consultation for user_id=..."
- "Consultation generated successfully"

–ï—Å–ª–∏ –ª–æ–≥–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –Ω–∞ –∫–∞–∫–æ–º-—Ç–æ —ç—Ç–∞–ø–µ, —ç—Ç–æ —É–∫–∞–∂–µ—Ç –Ω–∞ –º–µ—Å—Ç–æ –∑–∞–≤–∏—Å–∞–Ω–∏—è.

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏ –∏ CPU

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å—ã Python
ps aux | grep python

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
free -h

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ CPU
top
```

–ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å Python –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 100% CPU –∏–ª–∏ –º–Ω–æ–≥–æ –ø–∞–º—è—Ç–∏, –≤–æ–∑–º–æ–∂–Ω–æ, –ø—Ä–æ–±–ª–µ–º–∞ –≤ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–º —Ü–∏–∫–ª–µ –∏–ª–∏ —É—Ç–µ—á–∫–µ –ø–∞–º—è—Ç–∏.

### –®–∞–≥ 4: –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –ª–∏ —á—Ç–æ-—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ `bot.py`:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏** - –Ω–∞ –∫–∞–∫–æ–º —ç—Ç–∞–ø–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–∞–π–º–∞—É—Ç—ã** - –≤–æ–∑–º–æ–∂–Ω–æ, –∑–∞–ø—Ä–æ—Å –∫ GigaChat API –∑–∞–≤–∏—Å–∞–µ—Ç
3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö** - –≤–æ–∑–º–æ–∂–Ω–æ, –∑–∞–ø—Ä–æ—Å –∫ –ë–î –∑–∞–≤–∏—Å–∞–µ—Ç

### –®–∞–≥ 5: –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –∫—Ä–∏—Ç–∏—á–Ω–∞, –º–æ–∂–Ω–æ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—é –≤ Web App –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥—É `/consult` –≤ –±–æ—Ç–µ:

–í `webapp/static/js/app.js` –∏–∑–º–µ–Ω–∏—Ç–µ `loadConsultation()`:

```javascript
async function loadConsultation() {
    const content = document.getElementById('consultation-content');
    if (!content) return;
    
    content.innerHTML = `
        <div class="empty-state">
            <div class="empty-state-icon">ü§ñ</div>
            <div class="empty-state-title">–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è</div>
            <div class="empty-state-text">–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É /consult –≤ Telegram –±–æ—Ç–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–π –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏–∏</div>
        </div>
    `;
}
```

–ù–æ —ç—Ç–æ –Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –Ω–µ —Ä–µ—à–∞–µ—Ç –ø—Ä–æ–±–ª–µ–º—É.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–ü–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–¥–∞:

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–∞–π—Ç —á–µ—Ä–µ–∑ Telegram Web App
2. –ù–∞–∂–º–∏—Ç–µ "–õ–∏—á–Ω–∞—è –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü–∏—è"
3. –û—Ç–∫—Ä–æ–π—Ç–µ DevTools (F12) ‚Üí Console
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:
   ```bash
   sudo journalctl -u finadvisor-api.service -f
   ```

–ï—Å–ª–∏ –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ "Executing bot.py module...", –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∏–º–ø–æ—Ä—Ç–µ `bot.py`.

–ï—Å–ª–∏ –ª–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, —á—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ "Generating consultation...", –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ `generate_consultation` –∏–ª–∏ –∑–∞–ø—Ä–æ—Å–µ –∫ GigaChat API.

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∏–º–ø–æ—Ä—Ç–µ `bot.py`, –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–æ–¥—É–ª—å —Ç–æ–ª—å–∫–æ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π `generate_consultation`, –±–µ–∑ –∏–º–ø–æ—Ä—Ç–∞ Bot/Dispatcher. –ù–æ —ç—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥–∞ –∫–æ–¥–∞.
