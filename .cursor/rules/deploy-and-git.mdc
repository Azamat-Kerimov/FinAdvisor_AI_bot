---
description: Git and deployment rules for FinAdvisor — VPS is deploy-only, GitHub is source of truth
alwaysApply: true
---

# Git and Deployment Rules (MUST FOLLOW)

- **Source of truth:** GitHub. VPS local files must NEVER override GitHub state.
- **Flow:** Cursor (local) → Push to GitHub → VPS: git fetch + reset (or pull) → systemd restart only.
- **On VPS:** NEVER suggest committing, stashing, or keeping local changes. NEVER suggest resolving conflicts by preserving local files. If git reports local changes → ALWAYS recommend discarding them and resetting to GitHub (e.g. `git fetch`, `git reset --hard origin/main`, `git clean -fd -e .env`).
- **VPS:** Deployment target only. NEVER suggest editing files directly on VPS.
- **.env:** Only file allowed to differ on VPS. Never commit .env. All other files must match GitHub.
- **Frontend:** Built on VPS. node_modules and frontend/dist must NOT be committed. Run npm install only if package.json/package-lock.json changed.
- **systemd:** Use absolute paths; use /root/FinAdvisor_AI_bot/venv/bin/python directly; do NOT rely on shell venv activation.
- **Goal:** Zero manual fixes on VPS, zero merge conflicts, zero "local changes would be overwritten."
- If an instruction violates these rules, DO NOT propose it.
